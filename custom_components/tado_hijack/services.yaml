# Shared Field Definitions (DRY)
set_mode:
  description: "Set a manual mode (overlay) with optional timer for Heating and AC zones."
  fields:
    entity_id:
      description: "Any Tado Hijack zone entity (e.g. climate.living_room or water_heater.hot_water)."
      required: true
      selector:
        entity:
          integration: tado_hijack
    hvac_mode:
      description: "Operation mode: 'auto' (resume schedule), 'heat' (manual overlay), or 'off'."
      required: true
      default: "heat"
      selector:
        select:
          options:
            - "off"
            - "heat"
            - "auto"
    duration: &field_duration
      description: "Duration in minutes after which the manual mode ends."
      selector:
        number:
          min: 1
          max: 1440
          unit_of_measurement: "min"
    overlay: &field_overlay
      description: "Termination mode: 'manual' (indefinite), 'next_block' (return to schedule at next time block), or 'presence' (until presence change)."
      required: true
      default: "manual"
      selector:
        select:
          options:
            - "manual"
            - "next_block"
            - "presence"
    temperature:
      description: "Target temperature (optional, 5-30°C)."
      default: 21.0
      selector:
        number:
          min: 5
          max: 30
          step: 0.1
          unit_of_measurement: "°C"
    refresh_after: &field_refresh_after
      description: "Force immediate data refresh. Note: For permanent changes or 'Resume Schedule' (auto), this triggers immediately. For timed modes (duration), the refresh is deferred until the timer expires."
      required: true
      default: false
      selector:
        boolean: {}

set_mode_all_zones:
  description: "Set a manual overlay for all heating and/or AC zones at once."
  fields:
    include_heating:
      description: "Include all heating zones (Thermostats)."
      required: true
      default: true
      selector:
        boolean: {}
    include_ac:
      description: "Include all air conditioning zones."
      required: true
      default: false
      selector:
        boolean: {}
    hvac_mode:
      description: "Operation mode: 'auto' (resume schedule), 'heat' (manual overlay), or 'off'."
      required: true
      default: "heat"
      selector:
        select:
          options:
            - "off"
            - "heat"
            - "auto"
    duration: *field_duration
    overlay: *field_overlay
    temperature:
      description: "Target temperature (will be automatically capped)."
      default: 21.0
      selector:
        number:
          min: 5
          max: 30
          step: 0.1
          unit_of_measurement: "°C"
    refresh_after: *field_refresh_after

set_water_heater_mode:
  description: "Set a manual mode (overlay) with optional timer for Water Heater zones."
  fields:
    entity_id:
      description: "Any Tado Hijack water heater entity (e.g. water_heater.hot_water)."
      required: true
      selector:
        entity:
          domain: water_heater
          integration: tado_hijack
    operation_mode:
      description: "Operation mode: 'auto' (resume schedule), 'heat' (on), or 'off'."
      required: true
      default: "heat"
      selector:
        select:
          options:
            - "off"
            - "heat"
            - "auto"
    duration: *field_duration
    overlay: *field_overlay
    temperature:
      description: "Target temperature (30-65°C)."
      default: 50
      selector:
        number:
          min: 30
          max: 65
          step: 1
          unit_of_measurement: "°C"
    refresh_after: *field_refresh_after
